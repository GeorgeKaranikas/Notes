
# WHOIS

- designed to access databases that store information about registered internet resources
- Identifying Key Personnel
- Discovering Network Infrastructure
    - Nameservers which can then find theyre IP`s

[whoisfreaks](https://whoisfreaks.com/)

` $ whois domain.com`


# DNS

### The road

Cache -> Resolver -> Root Nameserver -> TLD Nameserver -> Authorative NS -> Resolver -> Browser

### Local Cache

- Linux : `/etc/hosts`
- Windows : `C:\Windows\System32\drivers\etc\hosts`


### dnsenum

`dnsenum --enum target.com -f /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt -r`

### gobuster 

`gobuster dns -d target.com   -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt `


# nslookup

`$nslookup -query={record_type} {target}`


# .well-known

|URI Suffix 	|Description 	|Status |	Reference|
|-------------|-------------------|-----|----------
security.txt 	|Contains contact information for security researchers to report vulnerabilities. 	|Permanent |	RFC 9116|
/.well-known/change-password |	Provides a standard URL for directing users to a password change page. 	|Provisional |	https://w3c.github.io/webappsec-change-password-url/#the-change-password-well-known-uri
openid-configuration |	Defines configuration details for OpenID Connect, an identity layer on top of the OAuth 2.0 protocol. 	|Permanent |	http://openid.net/specs/openid-connect-discovery-1_0.html
assetlinks.json |	Used for verifying ownership of digital assets (e.g., apps) associated with a domain. 	|Permanent |	https://github.com/google/digitalassetlinks/blob/master/well-known/specification.md
mta-sts.txt| 	Specifies the policy for SMTP MTA Strict Transport Security (MTA-STS) to enhance email security. 	|Permanent 	|RFC 8461


# passive subdomain enum

### VirusTotal
Search the domain name to relations in virustotal


### using certificates

Another interesting source of information we can use to extract subdomains is SSL/TLS certificates. The main reason is Certificate Transparency (CT), a project that requires every SSL/TLS certificate issued by a Certificate Authority (CA) to be published in a publicly accessible log.

#### Cerfificate Transparency Logs
examine CT logs to discover additional domain names and subdomains for a target organization using two primary resources:

`https://censys.io`

`https://crt.sh`

```
$ export TARGET="target.com"
$ curl -s "https://crt.sh/?q=${TARGET}&output=json" | jq -r '.[] | "\(.name_value)\n\(.common_name)"' | sort -u > "${TARGET}_crt.sh.txt"
```


# TheHarvester

    $ cat sources.txt

        baidu
        bufferoverun
        crtsh
        hackertarget
        otx
        projecdiscovery
        rapiddns
        sublist3r
        threatcrowd
        trello
        urlscan
        vhost
        virustotal

```
    $ export TARGET="facebook.com"
    $ cat sources.txt | while read source; do theHarvester -d "${TARGET}" -b $source -f "${source}_${TARGET}";done
```
    --extract the subdomain
    $ cat *.json | jq -r '.hosts[]' 2>/dev/null | cut -d':' -f 1 | sort -u > "${TARGET}_theHarvester.txt"

    ----merge the files
    $ cat facebook.com_*.txt | sort -u > facebook.com_subdomains_passive.txt





            ----Netcraft

    visit https://sitereport.netcraft.com

    Some interesting details we can observe from the report are:
	
    Background 	General information about the domain, including the date it was first seen by Netcraft crawlers.
   
    Network 	Information about the netblock owner, hosting company, nameservers, etc.
    
    Hosting history 	Latest IPs used, webserver, and target OS.



                ---waybackmacine

        $ go install github.com/tomnomnom/waybackurls@latest

        $ waybackurls -dates https://facebook.com > waybackurls.txt

    